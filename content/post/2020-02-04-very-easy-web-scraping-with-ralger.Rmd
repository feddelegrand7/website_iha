---
title: (Very) Easy Web Scraping with ralger
author: Mohamed El Fodil Ihaddaden
date: '2020-02-04'
slug: very-easy-web-scraping-with-ralger
categories: []
tags:
  - Web Scraping
subtitle: ''
summary: ''
authors: []
lastmod: '2020-02-04T15:23:55+01:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

ralger is a package that aims to facilitate to the maximum web scraping in R. For scraping some data, you only need two elements, the **link** of the web page and the **html** or **css** node that references the needed information. Don’t panic, you don’t have to spend hours learning html and css. You can just use the SelectorGadget chrome extension. You can check out this [tutorial](https://www.youtube.com/watch?v=oqNTfWrGdbk) for more information.

# scrap()


Let’s dive into an example ! Suppose we want to extract all Golden Globes Best Actress Nominees (including the winner). In ralger you need only two elements:

![](https://media.giphy.com/media/KRMrrhE0BDXmE/giphy.gif)


The link: https://www.goldenglobes.com/winners-nominees/best-performance-actress-motion-picture-drama

The node: .primary-nominee a

And that’s it, we’re ready to scrap !

```{r message=FALSE, warning=FALSE}

library(ralger)

data <- scrap(
  "https://www.goldenglobes.com/winners-nominees/best-performance-actress-motion-picture-drama", 
  ".primary-nominee a"
)

data

```


Pretty simple right ? I hope so. Anyway, the problem here is that the main page displays only 20 nominees, from 2017 to 2020. What if we wanted to extract all nominees in history ? Indeed, you’re right, we’d have to scroll multiple pages (20 to be exact) across the website. In this context, we need to use paste() in conjunction with scrap() as follows:


```{r}
link <- "https://www.goldenglobes.com/winners-nominees/best-performance-actress-motion-picture-drama?page=" # Mind the change in the link structure "page=" 

node <- ".primary-nominee a" # we use the same node as previously

data_all <- scrap(paste(link, 0:20, sep = ""), node)

data_all
```

# tidy_scrap()


Now, imagine that we need a data frame composed of two columns :

- Actress: The names of Golden Globe Best Actress Nominees,
- Movie: The movie title for which they were nominated.

To construct our data frame we’ll use the tidy_scrap() function as follows:


```{r}

links <- paste(link, 0:20, sep = "") # The links required to extract the 350 observations

nodes <- c(".primary-nominee a", ".secondary-nominee")

column_names <- c("Actress", "Movie")


global_df <- tidy_scrap(links, nodes, column_names)


head(global_df, n = 10)


```

